<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura | App Oficial</title>
    <style>
        :root { 
            --bg: #000; --panel: #1c1c1e; --border: #262626; 
            --blue: #0095f6; --text-grey: #8e8e93; 
            --aura-grad: linear-gradient(45deg, #a020f0, #ff00ff, #00d4ff); 
        }
        body { margin: 0; background: var(--bg); color: white; font-family: sans-serif; overflow: hidden; }
        .view { height: 100vh; display: none; overflow-y: auto; padding-bottom: 70px; box-sizing: border-box; }
        .view.active { display: block; }

        /* --- HOME (AURA BRAND) --- */
        .home-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; }
        .brand-name { font-size: 1.8rem; margin: 0; background: var(--aura-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 800; }
        .stories-container { display: flex; padding: 10px 20px; border-bottom: 0.5px solid var(--border); }
        .story-ring { width: 70px; height: 70px; border-radius: 50%; padding: 3px; position: relative; background: var(--aura-grad); }
        .story-ring img { width: 100%; height: 100%; border-radius: 50%; border: 3px solid black; object-fit: cover; }

        /* --- BUSCAR (X FUNCIONAL) --- */
        .search-header { display: flex; align-items: center; padding: 10px 15px; gap: 15px; border-bottom: 1px solid var(--border); }
        .search-bar { background: #262626; border-radius: 10px; flex: 1; padding: 8px 12px; }
        .search-bar input { background: transparent; border: none; color: white; width: 100%; outline: none; }
        .recent-item { display: flex; align-items: center; padding: 15px; gap: 12px; transition: opacity 0.3s; }

        /* --- PERFIL --- */
        #view-profile { padding: 15px; }
        .p-ring { width: 85px; height: 85px; border-radius: 50%; padding: 3px; background: var(--aura-grad); position: relative; margin-top: 20px; }
        .p-ring img { width: 100%; height: 100%; border-radius: 50%; border: 3px solid black; object-fit: cover; }
        .btn-p { flex: 1; background: #262626; border: none; color: white; padding: 10px; border-radius: 8px; font-weight: bold; cursor: pointer; }

        /* --- C√ÅMARA Y SUBIR (LO NUEVO) --- */
        #camera-layer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 5000; }
        #video-feed { width: 100%; height: 100%; object-fit: cover; }
        #upload-menu { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 4000; align-items: center; justify-content: center; }
        .upload-box { background: var(--panel); width: 85%; border-radius: 25px; padding: 25px; text-align: center; }
        .opt-btn { background: var(--blue); color: white; padding: 18px; border-radius: 15px; margin-bottom: 12px; font-weight: bold; cursor: pointer; }

        /* NAV */
        nav { position: fixed; bottom: 0; width: 100%; height: 60px; background: #000; border-top: 1px solid var(--border); display: flex; justify-content: space-around; align-items: center; z-index: 1000; }
        .nav-icon { font-size: 1.5rem; opacity: 0.5; cursor: pointer; color: white; }
        .nav-icon.active { opacity: 1; }
    </style>
</head>
<body>

    <div id="view-home" class="view active">
        <div class="home-header"><h1 class="brand-name">Aura</h1></div>
        <div class="stories-container">
            <div class="story-ring"><img class="u-photo" src="https://i.pravatar.cc/150?u=moi"></div>
        </div>
        <p style="text-align:center; margin-top:50px; color:var(--text-grey);">Bienvenido a tu inicio</p>
    </div>

    <div id="view-search" class="view">
        <div class="search-header"><span>‚Äπ</span><div class="search-bar"><input type="text" placeholder="Buscar"></div></div>
        <div style="padding:15px;"><b>Recientes</b></div>
        <div class="recent-item">
            <div style="width:45px; height:45px; border-radius:50%; background:#333;"></div>
            <div style="flex:1;">Ayuntamiento de Estepona</div>
            <div style="cursor:pointer;" onclick="eliminarReciente(this)">‚úï</div>
        </div>
    </div>

    <div id="view-profile" class="view">
        <div style="display:flex; justify-content:space-between;"><b>moi_._lopez ‚à®</b></div>
        <div class="p-ring"><img class="u-photo" src="https://i.pravatar.cc/150?u=moi"></div>
        <div style="margin-top:15px;"><b id="d-name">moi_._Lopez</b><br><span id="d-bio" style="color:var(--text-grey);">üìç Estepona</span></div>
        <div style="display:flex; gap:10px; margin-top:20px;"><button class="btn-p" onclick="openEdit()">Editar perfil</button></div>
    </div>

    <div id="camera-layer">
        <video id="video-feed" autoplay playsinline></video>
        <div style="position:absolute; top:20px; right:20px; font-size:2rem;" onclick="stopCamera()">‚úï</div>
    </div>

    <div id="upload-menu" onclick="toggleUpload(false)">
        <div class="upload-box" onclick="event.stopPropagation()">
            <div class="opt-btn" onclick="startCamera()">üì∑ Grabar con C√°mara</div>
            <label class="opt-btn" style="background:#333;" for="gal-file">üñºÔ∏è Elegir de Galer√≠a</label>
            <input type="file" id="gal-file" style="display:none" accept="image/*,video/*" onchange="handleFile(this)">
            <div onclick="toggleUpload(false)" style="margin-top:10px; color:var(--text-grey);">Cancelar</div>
        </div>
    </div>

    <nav>
        <div class="nav-icon active" onclick="tab('view-home', this)">üè†</div>
        <div class="nav-icon" onclick="tab('view-search', this)">üîç</div>
        <div class="nav-icon" style="font-size:2.5rem; opacity:1;" onclick="toggleUpload(true)">+</div>
        <div class="nav-icon" onclick="tab('view-profile', this)">üë§</div>
    </nav>

    <script>
        // Navegaci√≥n b√°sica
        function tab(id, el) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-icon').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active'); el.classList.add('active');
        }

        // Eliminar recientes
        function eliminarReciente(btn) {
            btn.parentElement.style.opacity = '0';
            setTimeout(() => btn.parentElement.remove(), 300);
        }

        // L√≥gica de Subida y C√°mara
        function toggleUpload(show) { document.getElementById('upload-menu').style.display = show ? 'flex' : 'none'; }

        async function startCamera() {
            toggleUpload(false);
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                document.getElementById('video-feed').srcObject = stream;
                document.getElementById('camera-layer').style.display = 'block';
            } catch (e) { alert("Error al abrir c√°mara"); }
        }

        function stopCamera() {
            const stream = document.getElementById('video-feed').srcObject;
            if(stream) stream.getTracks().forEach(t => t.stop());
            document.getElementById('camera-layer').style.display = 'none';
        }

        function handleFile(input) {
            if(input.files[0]) {
                alert("Archivo seleccionado: " + input.files[0].name);
                toggleUpload(false);
            }
        }
    </script>
</body>
</html>
