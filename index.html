<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Aura | Final Stable</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@300;500;800&display=swap');
        :root { --bg: #000; --accent: #00ffd5; --rainbow: linear-gradient(45deg, #ff0055, #00ffd5, #cc00ff); --glass: rgba(10,10,10,0.98); }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; }

        /* --- ACCESO --- */
        #auth-overlay { position: fixed; inset: 0; background: var(--bg); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 25px; }
        .auth-box { width: 100%; max-width: 340px; text-align: center; }
        .auth-input { width: 100%; background: #0a0a0a; border: 1px solid #1a1a1a; padding: 18px; border-radius: 16px; color: white; margin-bottom: 12px; outline: none; box-sizing: border-box; }
        .btn-main { width: 100%; padding: 18px; border-radius: 40px; border: none; background: var(--accent); color: #000; font-weight: 800; cursor: pointer; }
        .social-login { display: flex; flex-direction: column; gap: 10px; margin-top: 25px; }
        .btn-social { width: 100%; padding: 15px; border-radius: 40px; border: 1px solid #222; background: transparent; color: white; font-weight: 600; cursor: pointer; }

        /* --- APP --- */
        #main-app { display: none; height: 100vh; }
        .view { display: none; height: 100vh; overflow-y: auto; padding-bottom: 120px; box-sizing: border-box; }
        .view.active { display: block; }

        /* --- HEADER & HISTORIAS --- */
        .header-elite { display: flex; flex-direction: column; align-items: center; padding: 40px 0 10px; }
        .aura-logo { font-family: 'Orbitron'; font-size: 2.2rem; letter-spacing: 10px; }
        .stories-container { display: flex; gap: 15px; padding: 20px; overflow-x: auto; border-bottom: 1px solid #111; }
        .story-circle { width: 70px; height: 70px; border-radius: 25px; background: #111; border: 2px solid #222; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .story-circle img { width: 100%; height: 100%; object-fit: cover; }
        
        /* --- POSTS --- */
        .post-card { width: 100%; border-bottom: 1px solid #111; margin-bottom: 10px; }
        .post-header { padding: 15px; display: flex; align-items: center; gap: 12px; }
        .mini-avatar { width: 32px; height: 32px; border-radius: 10px; background: #111; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; border: 1px solid #222; overflow: hidden; }
        .mini-avatar img { width:100%; height:100%; object-fit:cover; }
        .post-img-placeholder { width: 100%; aspect-ratio: 1/1; background: #050505; display: flex; align-items: center; justify-content: center; color: #111; font-weight: 900; }

        /* --- PERFIL --- */
        .p-card { padding: 30px 20px; }
        .p-avatar { width: 90px; height: 90px; border-radius: 30px; background: #111; border: 2px solid #222; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .p-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .p-stats { display: flex; flex: 1; justify-content: space-around; text-align: center; }
        .stat-val { font-size: 1.2rem; font-weight: 800; display: block; }
        .stat-label { font-size: 0.6rem; color: #555; text-transform: uppercase; }

        /* --- NAV --- */
        nav { position: fixed; bottom: 25px; left: 20px; right: 20px; height: 75px; background: var(--glass); backdrop-filter: blur(20px); border-radius: 35px; display: flex; justify-content: space-around; align-items: center; border: 1px solid #222; z-index: 5000; }
        .n-btn { font-size: 1.6rem; opacity: 0.3; cursor: pointer; }
        .n-btn.active { opacity: 1; color: var(--accent); }

        /* --- MODAL --- */
        #edit-modal { display: none; position: fixed; inset: 0; background: #000; z-index: 9000; padding: 40px 25px; }
    </style>
</head>
<body>

    <div id="auth-overlay">
        <div class="auth-box">
            <h1 class="aura-logo" style="margin-bottom:40px;">AURA</h1>
            <input type="email" id="acc-email" class="auth-input" placeholder="Email">
            <button class="btn-main" onclick="handleAuth()">ENTRAR</button>
            <div class="social-login">
                <button class="btn-social" onclick="handleSocial('Google')">Continuar con Google</button>
                <button class="btn-social" onclick="handleSocial('Facebook')">Continuar con Facebook</button>
            </div>
        </div>
    </div>

    <div id="edit-modal">
        <h2 style="font-family:'Orbitron';">EDITAR PERFIL</h2>
        <div style="width:100px; height:100px; background:#111; border-radius:30px; margin: 20px auto; overflow:hidden;" onclick="document.getElementById('file-in').click()">
            <img id="edit-preview" src="" style="width:100%; height:100%; object-fit:cover; display:none;">
            <div id="edit-label" style="text-align:center; padding-top:40px; font-size:10px;">FOTO</div>
        </div>
        <input type="file" id="file-in" hidden accept="image/*" onchange="uploadPhoto(this)">
        <input type="text" id="edit-name" class="auth-input" placeholder="Nombre">
        <textarea id="edit-bio" class="auth-input" style="height:100px;" placeholder="Bio"></textarea>
        <button class="btn-main" onclick="saveData()" style="background:#fff; color:#000;">GUARDAR</button>
    </div>

    <div id="main-app">
        <div id="view-home" class="view active">
            <div class="header-elite"><div class="aura-logo">AURA</div></div>
            <div class="stories-container">
                <div style="text-align:center;">
                    <div class="story-circle" style="border: 2px solid var(--accent);">
                        <img class="my-p-img" src="" style="display:none;">
                        <span class="my-p-init">?</span>
                    </div>
                    <div style="font-size:0.6rem; margin-top:5px; font-weight:800; color:#444;">MI HISTORIA</div>
                </div>
            </div>
            <div class="post-card">
                <div class="post-header">
                    <div class="mini-avatar"><img class="my-p-img" src="" style="display:none;"><span class="my-p-init">?</span></div>
                    <b class="my-p-name">Usuario</b>
                </div>
                <div class="post-img-placeholder">ZONA DE FOTOS</div>
            </div>
        </div>

        <div id="view-profile" class="view">
            <div class="p-card">
                <div style="text-align:right; margin-bottom:20px;"><span onclick="logout()" style="opacity:0.2; font-size:0.7rem; cursor:pointer;">LOGOUT</span></div>
                <div class="p-header">
                    <div class="p-avatar">
                        <img class="my-p-img" src="" style="display:none;">
                        <span class="my-p-init" style="font-size:2rem; font-family:'Orbitron'; color:var(--accent);">?</span>
                    </div>
                    <div class="p-stats">
                        <div><span class="stat-val">0</span><span class="stat-label">Fotos</span></div>
                        <div><span class="stat-val">0</span><span class="stat-label">Fans</span></div>
                        <div><span class="stat-val">0</span><span class="stat-label">Siguiendo</span></div>
                    </div>
                </div>
                <h2 class="my-p-name" style="font-family:'Orbitron'; margin:25px 0 5px;">Usuario</h2>
                <p id="my-p-bio" style="color:#666; font-size:0.9rem; margin-bottom:25px;">Escribe tu bio...</p>
                <button class="btn-main" style="background:#0a0a0a; color:#fff; border:1px solid #222; font-size:0.8rem;" onclick="document.getElementById('edit-modal').style.display='block'">EDITAR PERFIL</button>
            </div>
        </div>

        <nav>
            <div class="n-btn active" onclick="go('home', this)">üè†</div>
            <div class="n-btn" onclick="alert('Buscar')">üîç</div>
            <div class="n-btn" onclick="alert('C√°mara')">+</div>
            <div class="n-btn" onclick="go('home', this)">üé¨</div>
            <div class="n-btn" onclick="go('profile', this)">üë§</div>
        </nav>
    </div>

    <script>
        let user = { email: "", name: "", bio: "Bienvenido", photo: "" };

        function handleAuth() {
            const em = document.getElementById('acc-email').value;
            if(!em.includes('@')) return;
            login(em, em.split('@')[0]);
        }

        function handleSocial(p) {
            login(p.toLowerCase()+'@aura.com', p + ' User');
        }

        function login(em, defaultName) {
            user.email = em;
            const data = localStorage.getItem('aura_db_'+em);
            if(data) user = JSON.parse(data);
            else user.name = defaultName;
            
            localStorage.setItem('aura_session', em);
            document.getElementById('auth-overlay').style.display='none';
            document.getElementById('main-app').style.display='block';
            render();
        }

        function uploadPhoto(input) {
            if (input.files && input.files[0]) {
                const r = new FileReader();
                r.onload = (e) => {
                    user.photo = e.target.result;
                    document.getElementById('edit-preview').src = e.target.result;
                    document.getElementById('edit-preview').style.display = 'block';
                    document.getElementById('edit-label').style.display = 'none';
                };
                r.readAsDataURL(input.files[0]);
            }
        }

        function saveData() {
            user.name = document.getElementById('edit-name').value;
            user.bio = document.getElementById('edit-bio').value;
            localStorage.setItem('aura_db_'+user.email, JSON.stringify(user));
            render();
            document.getElementById('edit-modal').style.display='none';
        }

        function render() {
            document.querySelectorAll('.my-p-name').forEach(el => el.innerText = user.name);
            document.getElementById('my-p-bio').innerText = user.bio;
            document.getElementById('edit-name').value = user.name;
            document.getElementById('edit-bio').value = user.bio;

            const init = user.name.charAt(0).toUpperCase();
            document.querySelectorAll('.my-p-init').forEach(el => el.innerText = init);

            if(user.photo) {
                document.querySelectorAll('.my-p-img').forEach(img => { img.src = user.photo; img.style.display='block'; });
                document.querySelectorAll('.my-p-init').forEach(el => el.style.display='none');
                document.getElementById('edit-preview').src = user.photo;
                document.getElementById('edit-preview').style.display = 'block';
                document.getElementById('edit-label').style.display = 'none';
            }
        }

        function go(v, btn) {
            document.querySelectorAll('.view').forEach(x => x.classList.remove('active'));
            document.querySelectorAll('.n-btn').forEach(x => x.classList.remove('active'));
            document.getElementById('view-'+v).classList.add('active');
            btn.classList.add('active');
        }

        function logout() { localStorage.removeItem('aura_session'); location.reload(); }

        window.onload = () => {
            const s = localStorage.getItem('aura_session');
            if(s) login(s, "");
        };
    </script>
</body>
</html>
